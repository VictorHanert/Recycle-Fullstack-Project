{
	"info": {
		"_postman_id": "009e048a-6eb2-4b01-a005-e3b26368e6bc",
		"name": "Fullstack Project - Comprehensive API Test Suite",
		"description": "Complete test suite for the Fullstack Project API with positive/negative tests, security checks, header validation, schema validation, and execution time monitoring for all endpoints. **V2 includes Update/Delete Product tests and Admin positive test.**",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "29369570"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "1. Register User (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// POSITIVE TEST: Successful Registration",
									"pm.test(\"P-1: Status code is 201 Created\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"// Security & Authorization: Check token is returned",
									"pm.test(\"P-3: Response contains access_token\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('access_token');",
									"    pm.expect(jsonData.access_token).to.be.a('string').and.not.empty;",
									"    // Save token for subsequent requests",
									"    pm.collectionVariables.set(\"authToken\", jsonData.access_token);",
									"});",
									"// Contract & Schema Validation",
									"pm.test(\"P-4: Response schema is valid\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('object');",
									"    pm.expect(jsonData).to.have.all.keys('access_token', 'token_type', 'expires_in', 'user');",
									"    // User object validation",
									"    pm.expect(jsonData.user).to.be.an('object');",
									"    pm.expect(jsonData.user).to.have.property('id');",
									"    pm.expect(jsonData.user).to.have.property('username');",
									"    pm.expect(jsonData.user).to.have.property('email');",
									"    // Save user ID",
									"    pm.collectionVariables.set(\"userId\", jsonData.user.id.toString());",
									"});",
									"// Header Validation",
									"pm.test(\"P-5: Response headers are correct\", function () {",
									"    pm.response.to.have.header('Content-Type');",
									"    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
									"});",
									"// Save the dynamic identifier for the next login test (IMPROVEMENT)",
									"const requestBody = JSON.parse(pm.request.body.raw);",
									"pm.collectionVariables.set(\"testUserIdentifier\", requestBody.email);",
									"pm.collectionVariables.set(\"testUserPassword\", requestBody.password);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"testuser_{{$timestamp}}\",\n    \"email\": \"testuser_{{$timestamp}}@example.com\",\n    \"password\": \"SecurePass123!\",\n    \"full_name\": \"Test User\",\n    \"phone\": \"+4512345678\"\n}"
						},
						"url": {
							"raw": "{{baseURL}}/api/auth/register",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"auth",
								"register"
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Register User - Invalid Email (Negative)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// NEGATIVE TEST: Invalid Email Format",
									"pm.test(\"N-1: Status code is 422 Unprocessable Entity\", function () {",
									"    pm.response.to.have.status(422);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"testuser\",\n    \"email\": \"invalid-email\",\n    \"password\": \"SecurePass123!\",\n    \"full_name\": \"Test User\"\n}"
						},
						"url": {
							"raw": "{{baseURL}}/api/auth/register",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"auth",
								"register"
							]
						}
					},
					"response": []
				},
				{
					"name": "3. Login User (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// POSITIVE TEST: Successful Login",
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"// Security Check: Token received",
									"pm.test(\"P-3: Valid JWT token received\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('access_token');",
									"    // Update auth token (Important for remaining tests)",
									"    pm.collectionVariables.set(\"authToken\", jsonData.access_token);",
									"});",
									"// Schema Validation",
									"pm.test(\"P-4: Login response schema is valid\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.all.keys('access_token', 'token_type', 'expires_in', 'user');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"identifier\": \"{{testUserIdentifier}}\",\n    \"password\": \"{{testUserPassword}}\"\n}"
						},
						"url": {
							"raw": "{{baseURL}}/api/auth/login",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "4. Login - Wrong Password (Negative)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// NEGATIVE TEST: Invalid Credentials",
									"pm.test(\"N-1: Status code is 401 Unauthorized\", function () {",
									"    pm.response.to.have.status(401);",
									"});",
									"pm.test(\"N-3: No token in response\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.not.have.property('access_token');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"identifier\": \"{{testUserIdentifier}}\",\n    \"password\": \"wrongpassword\"\n}"
						},
						"url": {
							"raw": "{{baseURL}}/api/auth/login",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Products",
			"item": [
				{
					"name": "1. Get All Products (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"// Schema Validation",
									"pm.test(\"P-3: Response schema is valid\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('object');",
									"    pm.expect(jsonData).to.have.all.keys('products', 'total', 'page', 'size', 'total_pages');",
									"    pm.expect(jsonData.products).to.be.an('array');",
									"});",
									"// Data Structure Validation",
									"pm.test(\"P-4: Product items have correct structure\", function () {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.products.length > 0) {",
									"        const product = jsonData.products[0];",
									"        pm.expect(product).to.have.property('id');",
									"        pm.expect(product).to.have.property('title');",
									"        ",
									"        // FIX: Check for 'price_amount' instead of 'price'",
									"        pm.expect(product).to.have.property('price_amount'); ",
									"        ",
									"        // You might also want to check for currency",
									"        pm.expect(product).to.have.property('price_currency');",
									"        ",
									"        pm.expect(product).to.have.property('seller_id');",
									"        ",
									"        // Save a product ID for later tests (if one exists)",
									"        pm.collectionVariables.set(\"productId\", product.id.toString());",
									"    }",
									"});",
									"// Header Validation",
									"pm.test(\"P-5: Content-Type header is correct\", function () {",
									"    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURL}}/api/products?page=1&size=15",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"products"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "size",
									"value": "15"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Get Products - Invalid Page (Negative)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// NEGATIVE TEST: Invalid Query Parameter",
									"pm.test(\"N-1: Status code is 422 (validation error)\", function () {",
									"    pm.response.to.have.status(422);",
									"});",
									"pm.test(\"N-2: Response time is within global limit\", function () {",
									"    const maxTime = pm.collectionVariables.get(\"maxExecutionTime\");",
									"    pm.expect(pm.response.responseTime).to.be.below(parseInt(maxTime, 10));",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURL}}/api/products?page=-1&size=15",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"products"
							],
							"query": [
								{
									"key": "page",
									"value": "-1"
								},
								{
									"key": "size",
									"value": "15"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "3. Get Product by ID (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"pm.test(\"P-3: Product details schema is valid\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('object');",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('title');",
									"    pm.expect(jsonData).to.have.property('description');",
									"    pm.expect(jsonData).to.have.property('price_amount');",
									"    pm.expect(jsonData).to.have.property('seller_id');",
									"});",
									"pm.test(\"P-4: Product ID matches requested ID\", function () {",
									"    const jsonData = pm.response.json();",
									"    const requestedId = pm.collectionVariables.get(\"productId\");",
									"    pm.expect(jsonData.id.toString()).to.equal(requestedId);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURL}}/api/products/{{productId}}",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"products",
								"{{productId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "4. Get Product - Not Found (Negative)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// NEGATIVE TEST: Product Not Found",
									"pm.test(\"N-1: Status code is 404 Not Found\", function () {",
									"    pm.response.to.have.status(404);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURL}}/api/products/999999",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"products",
								"999999"
							]
						}
					},
					"response": []
				},
				{
					"name": "5. Create Product (Positive - Auth Required)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 201 Created\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"// Security: Verify authenticated user is the seller",
									"pm.test(\"P-3: Created product belongs to authenticated user\", function () {",
									"    const jsonData = pm.response.json();",
									"    const userId = pm.collectionVariables.get(\"userId\");",
									"    pm.expect(jsonData).to.have.property('seller_id');",
									"    pm.expect(jsonData.seller_id.toString()).to.equal(userId);",
									"});",
									"",
									"// Data Structure Validation (updated for single product object)",
									"pm.test(\"P-4: Product items have correct structure\", function () {",
									"    // Defensive: response is JSON and an object",
									"    let jsonData;",
									"    try {",
									"        jsonData = pm.response.json();",
									"    } catch (e) {",
									"        pm.expect.fail(\"Response body is not valid JSON: \" + e.message);",
									"    }",
									"",
									"    pm.expect(jsonData).to.be.an('object');",
									"",
									"    // Basic required fields (checking property existence)",
									"    const requiredStringProps = ['title', 'price_currency', 'status', 'condition'];",
									"    const requiredNumberProps = ['id', 'category_id', 'quantity', 'seller_id', 'location_id'];",
									"    ",
									"    // Check for required string properties",
									"    requiredStringProps.forEach(p => {",
									"        pm.expect(jsonData, `Missing required property: ${p}`).to.have.property(p);",
									"        pm.expect(jsonData[p], `${p} must be a string`).to.be.a('string');",
									"    });",
									"",
									"    // Check for required number properties",
									"    requiredNumberProps.forEach(p => {",
									"        pm.expect(jsonData, `Missing required property: ${p}`).to.have.property(p);",
									"        pm.expect(jsonData[p], `${p} must be a number`).to.be.a('number');",
									"    });",
									"",
									"    // Type/shape checks on key data",
									"    pm.expect(jsonData.id).to.be.a('number').and.to.be.greaterThan(0);",
									"    pm.expect(jsonData.title).to.be.a('string').and.to.have.length.greaterThan(0);",
									"    ",
									"    // price_amount as string decimal check",
									"    if (jsonData.price_amount !== undefined && jsonData.price_amount !== null) {",
									"        pm.expect(jsonData.price_amount).to.be.a('string');",
									"        // Regex checks if the string is a valid decimal number format (e.g., \"199.99\")",
									"        pm.expect(/^-?\\d+(?:\\.\\d+)?$/.test(jsonData.price_amount), 'price_amount should be a decimal string').to.be.true;",
									"    }",
									"    ",
									"    pm.expect(jsonData.price_currency).to.be.a('string').and.to.have.length.of.at.least(3);",
									"",
									"    // Arrays/objects structure check",
									"    const arrayProps = ['images', 'colors', 'materials', 'tags', 'price_changes'];",
									"    arrayProps.forEach(p => {",
									"        if (jsonData[p] !== undefined && jsonData[p] !== null) {",
									"            pm.expect(jsonData[p], `${p} should be an array when present`).to.be.an('array');",
									"        }",
									"    });",
									"",
									"    // Nested object checks for basic structure",
									"    if (jsonData.seller) {",
									"        pm.expect(jsonData.seller).to.be.an('object');",
									"        pm.expect(jsonData.seller).to.have.property('id');",
									"    }",
									"    if (jsonData.location) {",
									"        pm.expect(jsonData.location).to.be.an('object');",
									"        pm.expect(jsonData.location).to.have.property('id');",
									"    }",
									"",
									"    // Save productId for later tests (Crucial for Update and Delete steps)",
									"    if (jsonData.id) {",
									"        pm.collectionVariables.set(\"userCreatedProductId\", jsonData.id.toString());",
									"    }",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "product_data",
									"value": " {\"title\":\"Test Product {{$timestamp}}\",\"description\":\"This is a test product created by API testing with multipart form data\",\"price_amount\":199.99,\"currency\":\"DKK\",\"category_id\":1,\"condition\":\"new\"}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseURL}}/api/products",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"products"
							]
						}
					},
					"response": []
				},
				{
					"name": "6. Update Product (Positive - Auth Required)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"pm.test(\"P-2: Title has been updated\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.title).to.include('UPDATED');",
									"});",
									"pm.test(\"P-3: Price has been updated\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.price_amount).to.equal(\"299.99\");",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "product_data",
									"value": " {\"title\":\"Test Product UPDATED {{$timestamp}}\",\"description\":\"This product was updated.\",\"price_amount\":299.99,\"currency\":\"DKK\",\"category_id\":1,\"condition\":\"fair\"}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseURL}}/api/products/{{userCreatedProductId}}",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"products",
								"{{userCreatedProductId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "7. Create Product - No Auth (Negative)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// NEGATIVE TEST: Authorization Required",
									"pm.test(\"N-1: Status code is 403 Forbidden\", function () {",
									"    // Test updated to match API's 403 response for missing authentication",
									"    pm.response.to.have.status(403);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "product_data",
									"value": " {\"title\":\"Test Product {{$timestamp}}\",\"description\":\"This is a test product created by API testing with multipart form data\",\"price_amount\":199.99,\"currency\":\"DKK\",\"category_id\":1,\"condition\":\"new\"}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseURL}}/api/products",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"products"
							]
						}
					},
					"response": []
				},
				{
					"name": "8. Delete Product (Positive - Auth Required)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 204 OK\", function () {",
									"    pm.response.to.have.status(204);",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/products/{{userCreatedProductId}}",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"products",
								"{{userCreatedProductId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "9. Get Categories (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"pm.test(\"P-3: Categories array is returned\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});",
									"pm.test(\"P-4: Each category has correct structure\", function () {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.length > 0) {",
									"        const category = jsonData[0];",
									"        pm.expect(category).to.have.property('id');",
									"        pm.expect(category).to.have.property('name');",
									"    }",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURL}}/api/products/categories",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"products",
								"categories"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Favorites",
			"item": [
				{
					"name": "1. Add to Favorites (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 201 Created\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"// Security: Auth required for favorites",
									"pm.test(\"P-3: Authorization header validated\", function () {",
									"    pm.expect(pm.request.headers.get('Authorization')).to.include('Bearer');",
									"});",
									"pm.test(\"P-4: Success message returned\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('message');",
									"    pm.expect(jsonData).to.have.property('product_id');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/favorites/{{productId}}",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"favorites",
								"{{productId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Add to Favorites - Not Existing (Negative)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// NEGATIVE TEST: Authorization Required",
									"pm.test(\"N-1: Status code is 404 Not Found\", function () {",
									"    // Assuming 404 is returned if product doesn't exist, even with auth",
									"    pm.response.to.have.status(404);",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/favorites/696969",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"favorites",
								"696969"
							]
						}
					},
					"response": []
				},
				{
					"name": "3. Get Favorites List (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"pm.test(\"P-3: Favorites array returned\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});",
									"pm.test(\"P-4: Header validation\", function () {",
									"    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/favorites",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"favorites"
							]
						}
					},
					"response": []
				},
				{
					"name": "4. Remove from Favorites (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"pm.test(\"P-2: Response time is within global limit\", function () {",
									"    const maxTime = pm.collectionVariables.get(\"maxExecutionTime\");",
									"    pm.expect(pm.response.responseTime).to.be.below(parseInt(maxTime, 10));",
									"});",
									"pm.test(\"P-3: Success message returned\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('message');",
									"    pm.expect(jsonData.message).to.include('removed');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/favorites/{{productId}}",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"favorites",
								"{{productId}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Messages",
			"item": [
				{
					"name": "1. Start Conversation (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 201 Created\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"pm.test(\"P-3: Message schema is valid\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('conversation_id');",
									"    pm.expect(jsonData).to.have.property('sender_id');",
									"    pm.expect(jsonData).to.have.property('body');",
									"    // Save conversation ID",
									"    pm.collectionVariables.set(\"conversationId\", jsonData.conversation_id.toString());",
									"});",
									"// Security: Auth required",
									"pm.test(\"P-4: Authorization header present\", function () {",
									"    pm.expect(pm.request.headers.get('Authorization')).to.not.be.undefined;",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"product_id\": {{productId}},\n    \"participant_ids\": [2],\n    \"first_message\": \"Hi, is this product still available?\"\n}"
						},
						"url": {
							"raw": "{{baseURL}}/api/messages/conversations",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"messages",
								"conversations"
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Get Conversations (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"pm.test(\"P-3: Conversations array returned\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});",
									"pm.test(\"P-4: Each conversation has correct structure\", function () {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.length > 0) {",
									"        const conv = jsonData[0];",
									"        pm.expect(conv).to.have.property('id');",
									"        pm.expect(conv).to.have.property('product_id');",
									"        pm.expect(conv).to.have.property('participants');",
									"        pm.expect(conv).to.have.property('unread_count');",
									"    }",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/messages/conversations",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"messages",
								"conversations"
							]
						}
					},
					"response": []
				},
				{
					"name": "3. Send Message - No Auth (Negative)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// NEGATIVE TEST: Authorization Required",
									"pm.test(\"N-1: Status code is 403 Unauthorized\", function () {",
									"    pm.response.to.have.status(403);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"product_id\": {{productId}},\n    \"participant_ids\": [2],\n    \"first_message\": \"Unauthorized message\"\n}"
						},
						"url": {
							"raw": "{{baseURL}}/api/messages/conversations",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"messages",
								"conversations"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Profile",
			"item": [
				{
					"name": "1. Get My Profile (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"// Security: Profile data matches authenticated user",
									"pm.test(\"P-3: Profile belongs to authenticated user\", function () {",
									"    const jsonData = pm.response.json();",
									"    const userId = pm.collectionVariables.get(\"userId\");",
									"    pm.expect(jsonData.id.toString()).to.equal(userId);",
									"    pm.expect(jsonData).to.have.property('username');",
									"    pm.expect(jsonData).to.have.property('email');",
									"});",
									"pm.test(\"P-4: Profile schema validation\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('created_at');",
									"    pm.expect(jsonData).to.have.property('full_name');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/profile/me",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"profile",
								"me"
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Update Profile (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"pm.test(\"P-3: Updated profile returned\", function () {",
									"    const jsonData = pm.response.json();",
									"    const requestBody = JSON.parse(pm.request.body.raw);",
									"    pm.expect(jsonData.full_name).to.equal(requestBody.full_name);",
									"});",
									"pm.test(\"P-4: Schema validation\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('username');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"full_name\": \"Updated Test User\",\n    \"phone\": \"+4512345678\",\n    \"bio\": \"Updated bio for testing\"\n}"
						},
						"url": {
							"raw": "{{baseURL}}/api/profile/me",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"profile",
								"me"
							]
						}
					},
					"response": []
				},
				{
					"name": "3. Get Profile - No Auth (Negative)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// NEGATIVE TEST: Authorization Required",
									"pm.test(\"N-1: Status code is 403 Unauthorized\", function () {",
									"    pm.response.to.have.status(403);",
									"});",
									"pm.test(\"N-3: No profile data exposed\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.not.have.property('email');",
									"    pm.expect(jsonData).to.not.have.property('username');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURL}}/api/profile/me",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"profile",
								"me"
							]
						}
					},
					"response": []
				},
				{
					"name": "4. Get My Products (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"pm.test(\"P-3: Products array returned\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/profile/me/products",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"profile",
								"me",
								"products"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Activity",
			"item": [
				{
					"name": "1. Get View History (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"pm.test(\"P-3: View history schema is valid\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('items');",
									"    pm.expect(jsonData).to.have.property('total');",
									"    pm.expect(jsonData.items).to.be.an('array');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/activity/history/views?limit=20",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"activity",
								"history",
								"views"
							],
							"query": [
								{
									"key": "limit",
									"value": "20"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Get Popular Products (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"pm.test(\"P-3: Popular products schema is valid\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('products');",
									"    pm.expect(jsonData.products).to.be.an('array');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURL}}/api/activity/popular-products?limit=10",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"activity",
								"popular-products"
							],
							"query": [
								{
									"key": "limit",
									"value": "10"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Admin",
			"item": [
				{
					"name": "1. Login Admin (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// POSITIVE TEST: Successful Login",
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"// Security Check: Token received",
									"pm.test(\"P-3: Valid JWT token received\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('access_token');",
									"    pm.expect(jsonData.access_token).to.be.a('string').and.not.empty;",
									"    // Save token for Admin subsequent requests",
									"    pm.collectionVariables.set(\"adminAuthToken\", jsonData.access_token);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"identifier\": \"admin\",\n    \"password\": \"admin123\"\n}"
						},
						"url": {
							"raw": "{{baseURL}}/api/auth/login",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Get All Users (Positive - Admin Only)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// POSITIVE TEST: Admin Access Successful",
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"pm.test(\"P-2: Response contains user list and pagination\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('users');",
									"    pm.expect(jsonData.users).to.be.an('array');",
									"    pm.expect(jsonData).to.have.property('total');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{adminAuthToken}}",
								"disabled": true
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/admin/users?page=1&size=15",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"admin",
								"users"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "size",
									"value": "15"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "3. Get All Users - Unauthorized (Negative)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// NEGATIVE TEST: Authorization Required for Admin",
									"pm.test(\"N-1: Status code is 403 Forbidden\", function () {",
									"    // Assuming admin endpoints return 403 for non-admin users/tokens",
									"    pm.response.to.have.status(403);",
									"});",
									"pm.test(\"N-3: No sensitive data exposed\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.not.have.property('users');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/admin/users",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"admin",
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "4. Admin Endpoint - No Auth (Negative)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// NEGATIVE TEST: Authorization Token Missing",
									"pm.test(\"N-1: Status code is 403 Forbidden\", function () {",
									"    pm.response.to.have.status(403);",
									"});",
									"pm.test(\"N-3: No sensitive data exposed\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.not.have.property('users');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURL}}/api/admin/users",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"admin",
								"users"
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					"// Postman test to check the response time",
					"pm.test(`Global: Response time is less than 300 ms`, function () {",
					"    // pm.response.responseTime is a built-in variable that holds the total time taken for the request/response cycle in milliseconds.",
					"    pm.expect(pm.response.responseTime).to.be.below(300);",
					"});"
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseURL",
			"value": "http://localhost:8000",
			"description": {
				"content": "Base URL for the API",
				"type": "text/plain"
			}
		},
		{
			"key": "maxExecutionTime",
			"value": "500",
			"description": {
				"content": "Maximum allowed execution time in milliseconds",
				"type": "text/plain"
			}
		},
		{
			"key": "authToken",
			"value": "",
			"description": {
				"content": "JWT authentication token (set automatically after user login)",
				"type": "text/plain"
			}
		},
		{
			"key": "adminAuthToken",
			"value": "",
			"description": {
				"content": "JWT authentication token (set automatically after admin login)",
				"type": "text/plain"
			}
		},
		{
			"key": "userId",
			"value": "",
			"description": {
				"content": "Current user ID (set automatically after login)",
				"type": "text/plain"
			}
		},
		{
			"key": "productId",
			"value": "1",
			"description": {
				"content": "Default product ID for testing favorites/messages against a general product.",
				"type": "text/plain"
			}
		},
		{
			"key": "userCreatedProductId",
			"value": "",
			"description": {
				"content": "Product ID created by the test user (used for Update/Delete tests).",
				"type": "text/plain"
			}
		},
		{
			"key": "conversationId",
			"value": "",
			"description": {
				"content": "Test conversation ID (set after creating conversation)",
				"type": "text/plain"
			}
		},
		{
			"key": "testUserIdentifier",
			"value": "",
			"description": {
				"content": "Dynamic email/username of the registered test user.",
				"type": "text/plain"
			}
		},
		{
			"key": "testUserPassword",
			"value": "SecurePass123!",
			"description": {
				"content": "Password of the registered test user.",
				"type": "text/plain"
			}
		}
	]
}