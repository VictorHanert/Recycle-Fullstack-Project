{
	"info": {
		"_postman_id": "a1d19507-115b-4c72-918a-80efedbdf623",
		"name": "Fullstack Project - Comprehensive API Test Suite",
		"description": "Complete test suite for the Fullstack Project API with positive/negative tests, security checks, header validation, schema validation, and execution time monitoring for all endpoints.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "29369570"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "1. Register User (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// POSITIVE TEST: Successful Registration",
									"pm.test(\"P-1: Status code is 201 Created\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"",
									"// Security & Authorization: Check token is returned",
									"pm.test(\"P-3: Response contains access_token\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('access_token');",
									"    pm.expect(jsonData.access_token).to.be.a('string').and.not.empty;",
									"    ",
									"    // Save token for subsequent requests",
									"    pm.collectionVariables.set(\"authToken\", jsonData.access_token);",
									"});",
									"",
									"// Contract & Schema Validation",
									"pm.test(\"P-4: Response schema is valid\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('object');",
									"    pm.expect(jsonData).to.have.all.keys('access_token', 'token_type', 'expires_in', 'user');",
									"    pm.expect(jsonData.token_type).to.equal('bearer');",
									"    pm.expect(jsonData.expires_in).to.be.a('number');",
									"    ",
									"    // User object validation",
									"    pm.expect(jsonData.user).to.be.an('object');",
									"    pm.expect(jsonData.user).to.have.property('id');",
									"    pm.expect(jsonData.user).to.have.property('username');",
									"    pm.expect(jsonData.user).to.have.property('email');",
									"    ",
									"    // Save user ID",
									"    pm.collectionVariables.set(\"userId\", jsonData.user.id.toString());",
									"});",
									"",
									"// Header Validation",
									"pm.test(\"P-5: Response headers are correct\", function () {",
									"    pm.response.to.have.header('Content-Type');",
									"    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"packages": {},
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"testuser_{{$timestamp}}\",\n    \"email\": \"testuser_{{$timestamp}}@example.com\",\n    \"password\": \"SecurePass123!\",\n    \"full_name\": \"Test User\",\n    \"phone\": \"+4512345678\"\n}"
						},
						"url": {
							"raw": "{{baseURL}}/api/auth/register",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"auth",
								"register"
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Register User - Invalid Email (Negative)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// NEGATIVE TEST: Invalid Email Format",
									"pm.test(\"N-1: Status code is 422 Unprocessable Entity\", function () {",
									"    pm.response.to.have.status(422);",
									"});",
									"",
									"// Error Response Validation",
									"pm.test(\"N-3: Error response contains validation details\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('detail');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"testuser\",\n    \"email\": \"invalid-email\",\n    \"password\": \"SecurePass123!\",\n    \"full_name\": \"Test User\"\n}"
						},
						"url": {
							"raw": "{{baseURL}}/api/auth/register",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"auth",
								"register"
							]
						}
					},
					"response": []
				},
				{
					"name": "3. Login User (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// POSITIVE TEST: Successful Login",
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"// Security Check: Token received",
									"pm.test(\"P-3: Valid JWT token received\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('access_token');",
									"    pm.expect(jsonData.access_token).to.be.a('string').and.not.empty;",
									"    ",
									"    // Update auth token",
									"    pm.collectionVariables.set(\"authToken\", jsonData.access_token);",
									"});",
									"",
									"// Schema Validation",
									"pm.test(\"P-4: Login response schema is valid\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.all.keys('access_token', 'token_type', 'expires_in', 'user');",
									"    pm.expect(jsonData.user).to.have.property('id');",
									"    pm.expect(jsonData.user).to.have.property('username');",
									"    pm.expect(jsonData.user).to.have.property('email');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"identifier\": \"testuser_1764577909@example.com\",\n    \"password\": \"SecurePass123!\"\n}"
						},
						"url": {
							"raw": "{{baseURL}}/api/auth/login",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "4. Login - Wrong Password (Negative)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// NEGATIVE TEST: Invalid Credentials",
									"pm.test(\"N-1: Status code is 401 Unauthorized\", function () {",
									"    pm.response.to.have.status(401);",
									"});",
									"",
									"",
									"",
									"pm.test(\"N-3: No token in response\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.not.have.property('access_token');",
									"});",
									"",
									"pm.test(\"N-4: Error message provided\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('detail');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"identifier\": \"testuser_1764577909@example.com\",\n    \"password\": \"wrongpassword\"\n}"
						},
						"url": {
							"raw": "{{baseURL}}/api/auth/login",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Products",
			"item": [
				{
					"name": "1. Get All Products (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"// Schema Validation",
									"pm.test(\"P-3: Response schema is valid\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('object');",
									"    pm.expect(jsonData).to.have.all.keys('products', 'total', 'page', 'size', 'total_pages');",
									"    pm.expect(jsonData.products).to.be.an('array');",
									"});",
									"",
									"// Data Structure Validation",
									"pm.test(\"P-4: Product items have correct structure\", function () {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.products.length > 0) {",
									"        const product = jsonData.products[0];",
									"        pm.expect(product).to.have.property('id');",
									"        pm.expect(product).to.have.property('title');",
									"        pm.expect(product).to.have.property('price');",
									"        pm.expect(product).to.have.property('seller_id');",
									"        ",
									"        // Save first product ID for later tests",
									"        pm.collectionVariables.set(\"productId\", product.id.toString());",
									"    }",
									"});",
									"",
									"// Header Validation",
									"pm.test(\"P-5: Content-Type header is correct\", function () {",
									"    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"packages": {},
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURL}}/api/products?page=1&size=15",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"products"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "size",
									"value": "15"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Get Products - Invalid Page (Negative)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// NEGATIVE TEST: Invalid Query Parameter",
									"pm.test(\"N-1: Status code is 422 (validation error)\", function () {",
									"    pm.response.to.have.status(422);",
									"});",
									"",
									"pm.test(\"N-2: Response time is within global limit\", function () {",
									"    const maxTime = pm.collectionVariables.get(\"maxExecutionTime\");",
									"    pm.expect(pm.response.responseTime).to.be.below(parseInt(maxTime, 10));",
									"});",
									"",
									"pm.test(\"N-3: Error detail provided\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('detail');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURL}}/api/products?page=-1&size=15",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"products"
							],
							"query": [
								{
									"key": "page",
									"value": "-1"
								},
								{
									"key": "size",
									"value": "15"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "3. Get Product by ID (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"pm.test(\"P-3: Product details schema is valid\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('object');",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('title');",
									"    pm.expect(jsonData).to.have.property('description');",
									"    pm.expect(jsonData).to.have.property('price_amount');",
									"    pm.expect(jsonData).to.have.property('seller_id');",
									"});",
									"",
									"pm.test(\"P-4: Product ID matches requested ID\", function () {",
									"    const jsonData = pm.response.json();",
									"    const requestedId = pm.collectionVariables.get(\"productId\");",
									"    pm.expect(jsonData.id.toString()).to.equal(requestedId);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURL}}/api/products/{{productId}}",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"products",
								"{{productId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "4. Get Product - Not Found (Negative)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// NEGATIVE TEST: Product Not Found",
									"pm.test(\"N-1: Status code is 404 Not Found\", function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"",
									"pm.test(\"N-3: Error message is descriptive\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('detail');",
									"    pm.expect(jsonData.detail).to.be.a('string');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURL}}/api/products/999999",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"products",
								"999999"
							]
						}
					},
					"response": []
				},
				{
					"name": "5. Create Product (Positive - Auth Required)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 201 Created\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"",
									"// Security: Verify authenticated user is the seller",
									"pm.test(\"P-3: Created product belongs to authenticated user\", function () {",
									"    const jsonData = pm.response.json();",
									"    const userId = pm.collectionVariables.get(\"userId\");",
									"    pm.expect(jsonData).to.have.property('seller_id');",
									"});",
									"",
									"pm.test(\"P-4: Product creation schema is valid\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('title');",
									"    pm.expect(jsonData).to.have.property('price');",
									"    pm.expect(jsonData).to.have.property('created_at');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "product_data",
									"value": " {\"title\":\"Test Product {{$timestamp}}\",\"description\":\"This is a test product created by API testing with multipart form data\",\"price_amount\":199.99,\"currency\":\"DKK\",\"category_id\":1,\"condition\":\"new\"}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseURL}}/api/products",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"products"
							]
						}
					},
					"response": []
				},
				{
					"name": "6. Create Product - No Auth (Negative)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// NEGATIVE TEST: Authorization Required",
									"pm.test(\"N-1: Status code is 401 Unauthorized\", function () {",
									"    pm.response.to.have.status(401);",
									"});",
									"",
									"",
									"// Security Check: No product created without auth",
									"pm.test(\"N-3: Authentication error message provided\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('detail');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "product_data",
									"value": " {\"title\":\"Test Product {{$timestamp}}\",\"description\":\"This is a test product created by API testing with multipart form data\",\"price_amount\":199.99,\"currency\":\"DKK\",\"category_id\":1,\"condition\":\"new\"}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseURL}}/api/products",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"products"
							]
						}
					},
					"response": []
				},
				{
					"name": "7. Get Categories (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"P-3: Categories array is returned\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});",
									"",
									"pm.test(\"P-4: Each category has correct structure\", function () {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.length > 0) {",
									"        const category = jsonData[0];",
									"        pm.expect(category).to.have.property('id');",
									"        pm.expect(category).to.have.property('name');",
									"    }",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURL}}/api/products/categories",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"products",
								"categories"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Favorites",
			"item": [
				{
					"name": "1. Add to Favorites (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 201 Created\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"",
									"// Security: Auth required for favorites",
									"pm.test(\"P-3: Authorization header validated\", function () {",
									"    pm.expect(pm.request.headers.get('Authorization')).to.include('Bearer');",
									"});",
									"",
									"pm.test(\"P-4: Success message returned\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('message');",
									"    pm.expect(jsonData).to.have.property('product_id');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/favorites/{{productId}}",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"favorites",
								"{{productId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Add to Favorites - Not Existing (Negative)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// NEGATIVE TEST: Authorization Required",
									"pm.test(\"N-1: Status code is 401 Unauthorized\", function () {",
									"    pm.response.to.have.status(401);",
									"});",
									"",
									"",
									"pm.test(\"N-3: Error detail provided\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('detail');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/favorites/696969",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"favorites",
								"696969"
							]
						}
					},
					"response": []
				},
				{
					"name": "3. Get Favorites List (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"P-3: Favorites array returned\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});",
									"",
									"pm.test(\"P-4: Header validation\", function () {",
									"    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/favorites",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"favorites"
							]
						}
					},
					"response": []
				},
				{
					"name": "4. Remove from Favorites (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"P-2: Response time is within global limit\", function () {",
									"    const maxTime = pm.collectionVariables.get(\"maxExecutionTime\");",
									"    pm.expect(pm.response.responseTime).to.be.below(parseInt(maxTime, 10));",
									"});",
									"",
									"pm.test(\"P-3: Success message returned\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('message');",
									"    pm.expect(jsonData.message).to.include('removed');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/favorites/{{productId}}",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"favorites",
								"{{productId}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Messages",
			"item": [
				{
					"name": "1. Start Conversation (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 201 Created\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"",
									"",
									"pm.test(\"P-3: Message schema is valid\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('conversation_id');",
									"    pm.expect(jsonData).to.have.property('sender_id');",
									"    pm.expect(jsonData).to.have.property('body');",
									"    ",
									"    // Save conversation ID",
									"    pm.collectionVariables.set(\"conversationId\", jsonData.conversation_id.toString());",
									"});",
									"",
									"// Security: Auth required",
									"pm.test(\"P-4: Authorization header present\", function () {",
									"    pm.expect(pm.request.headers.get('Authorization')).to.not.be.undefined;",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"product_id\": {{productId}},\n    \"participant_ids\": [2],\n    \"first_message\": \"Hi, is this product still available?\"\n}"
						},
						"url": {
							"raw": "{{baseURL}}/api/messages/conversations",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"messages",
								"conversations"
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Get Conversations (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"P-3: Conversations array returned\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});",
									"",
									"pm.test(\"P-4: Each conversation has correct structure\", function () {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.length > 0) {",
									"        const conv = jsonData[0];",
									"        pm.expect(conv).to.have.property('id');",
									"        pm.expect(conv).to.have.property('product_id');",
									"        pm.expect(conv).to.have.property('participants');",
									"        pm.expect(conv).to.have.property('unread_count');",
									"    }",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/messages/conversations",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"messages",
								"conversations"
							]
						}
					},
					"response": []
				},
				{
					"name": "3. Send Message - No Auth (Negative)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// NEGATIVE TEST: Authorization Required",
									"pm.test(\"N-1: Status code is 401 Unauthorized\", function () {",
									"    pm.response.to.have.status(401);",
									"});",
									"",
									"",
									"pm.test(\"N-3: Authentication error returned\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('detail');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"product_id\": {{productId}},\n    \"participant_ids\": [2],\n    \"first_message\": \"Unauthorized message\"\n}"
						},
						"url": {
							"raw": "{{baseURL}}/api/messages/conversations",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"messages",
								"conversations"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Profile",
			"item": [
				{
					"name": "1. Get My Profile (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"// Security: Profile data matches authenticated user",
									"pm.test(\"P-3: Profile belongs to authenticated user\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('username');",
									"    pm.expect(jsonData).to.have.property('email');",
									"});",
									"",
									"pm.test(\"P-4: Profile schema validation\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('created_at');",
									"    pm.expect(jsonData).to.have.property('full_name');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/profile/me",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"profile",
								"me"
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Update Profile (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"P-3: Updated profile returned\", function () {",
									"    const jsonData = pm.response.json();",
									"    const requestBody = JSON.parse(pm.request.body.raw);",
									"    pm.expect(jsonData.full_name).to.equal(requestBody.full_name);",
									"});",
									"",
									"pm.test(\"P-4: Schema validation\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('username');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"full_name\": \"Updated Test User\",\n    \"phone\": \"+4512345678\",\n    \"bio\": \"Updated bio for testing\"\n}"
						},
						"url": {
							"raw": "{{baseURL}}/api/profile/me",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"profile",
								"me"
							]
						}
					},
					"response": []
				},
				{
					"name": "3. Get Profile - No Auth (Negative)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// NEGATIVE TEST: Authorization Required",
									"pm.test(\"N-1: Status code is 401 Unauthorized\", function () {",
									"    pm.response.to.have.status(401);",
									"});",
									"",
									"pm.test(\"N-3: No profile data exposed\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.not.have.property('email');",
									"    pm.expect(jsonData).to.not.have.property('username');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURL}}/api/profile/me",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"profile",
								"me"
							]
						}
					},
					"response": []
				},
				{
					"name": "4. Get My Products (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"P-3: Products array returned\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/profile/me/products",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"profile",
								"me",
								"products"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Activity",
			"item": [
				{
					"name": "1. Get View History (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"pm.test(\"P-3: View history schema is valid\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('items');",
									"    pm.expect(jsonData).to.have.property('total');",
									"    pm.expect(jsonData.items).to.be.an('array');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/activity/history/views?limit=20",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"activity",
								"history",
								"views"
							],
							"query": [
								{
									"key": "limit",
									"value": "20"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Get Popular Products (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"",
									"pm.test(\"P-3: Popular products schema is valid\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('products');",
									"    pm.expect(jsonData.products).to.be.an('array');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURL}}/api/activity/popular-products?limit=10",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"activity",
								"popular-products"
							],
							"query": [
								{
									"key": "limit",
									"value": "10"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Admin",
			"item": [
				{
					"name": "1. Login Admin (Positive)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// POSITIVE TEST: Successful Login",
									"pm.test(\"P-1: Status code is 200 OK\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"// Security Check: Token received",
									"pm.test(\"P-3: Valid JWT token received\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('access_token');",
									"    pm.expect(jsonData.access_token).to.be.a('string').and.not.empty;",
									"    ",
									"    // Update auth token",
									"    pm.collectionVariables.set(\"authToken\", jsonData.access_token);",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"identifier\": \"admin\",\n    \"password\": \"admin123\"\n}"
						},
						"url": {
							"raw": "{{baseURL}}/api/auth/login",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Get All Users - Admin Only (Security Test)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Enhanced tests: handle 200, 403, and 500 with diagnostics",
									"const status = pm.response.code;",
									"",
									"pm.test(\"R-0: Response has Content-Type header\", function () {",
									"  pm.response.to.have.header(\"Content-Type\");",
									"});",
									"",
									"if (status === 500) {",
									"  pm.test(\"E-1: Server returned 500\", function () {",
									"    pm.response.to.have.status(500);",
									"  });",
									"",
									"  let bodyText = pm.response.text();",
									"  let asJson;",
									"  try { asJson = pm.response.json(); } catch (e) { asJson = null; }",
									"",
									"  pm.test(\"E-2: Body contains diagnostic fields\", function () {",
									"    if (asJson) {",
									"      pm.expect(asJson).to.have.property('message');",
									"      pm.expect(asJson).to.have.property('status_code');",
									"      pm.expect(asJson).to.have.property('path');",
									"    } else {",
									"      pm.expect(bodyText.length).to.be.greaterThan(0);",
									"    }",
									"  });",
									"",
									"  // Surface correlation id and request info to help server-side tracing",
									"  pm.test(\"E-3: Correlation id present on request\", function () {",
									"    const cid = pm.request.headers.get('X-Correlation-Id');",
									"    pm.expect(cid, 'X-Correlation-Id header should be set').to.be.a('string');",
									"  });",
									"",
									"} else if (status === 403) {",
									"  pm.test(\"S-1: Non-admin access correctly blocked (403)\", function () {",
									"      pm.response.to.have.status(403);",
									"  });",
									"  ",
									"  pm.test(\"S-2: Forbidden error message provided\", function () {",
									"      const jsonData = pm.response.json();",
									"      pm.expect(jsonData).to.have.property('detail');",
									"  });",
									"",
									"} else if (status === 200) {",
									"  pm.test(\"P-1: Admin access granted (200)\", function () {",
									"      pm.response.to.have.status(200);",
									"  });",
									"  ",
									"  pm.test(\"P-2: Users list schema is valid\", function () {",
									"      const jsonData = pm.response.json();",
									"      pm.expect(jsonData).to.have.property('users');",
									"      pm.expect(jsonData).to.have.property('total');",
									"      pm.expect(jsonData.users).to.be.an('array');",
									"  });",
									"}",
									"",
									"// Always record basic timing and request details for debugging",
									"pm.environment.set('last_status_code', String(status));",
									"pm.environment.set('last_response_time_ms', String(pm.response.responseTime));",
									"pm.environment.set('last_correlation_id', pm.request.headers.get('X-Correlation-Id') || '');"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/admin/users?page=1&size=15",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"admin",
								"users"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "size",
									"value": "15"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "3. Admin Endpoint - No Auth (Negative)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// NEGATIVE TEST: Authorization Required for Admin",
									"pm.test(\"N-1: Status code is 401 Unauthorized\", function () {",
									"    pm.response.to.have.status(401);",
									"});",
									"",
									"",
									"pm.test(\"N-3: No sensitive data exposed\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.not.have.property('users');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURL}}/api/admin/users",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"admin",
								"users"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Edge Cases & HTTP Status Tests",
			"item": [
				{
					"name": "1. OPTIONS Request - CORS Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 or 204\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
									"});",
									"",
									"pm.test(\"CORS headers present\", function () {",
									"    pm.response.to.have.header('Access-Control-Allow-Origin');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "OPTIONS",
						"header": [],
						"url": {
							"raw": "{{baseURL}}/api/products",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"products"
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Invalid Endpoint - 404 Test",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 404 Not Found\", function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"pm.test(\"Response time check\", function () {",
									"    const maxTime = pm.collectionVariables.get(\"maxExecutionTime\");",
									"    pm.expect(pm.response.responseTime).to.be.below(parseInt(maxTime, 10));",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURL}}/api/nonexistent-endpoint",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"nonexistent-endpoint"
							]
						}
					},
					"response": []
				},
				{
					"name": "3. Malformed JSON - 400/422 Test",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 400 or 422\", function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([400, 422]);",
									"});",
									"",
									"pm.test(\"Error detail provided\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('detail');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ invalid json"
						},
						"url": {
							"raw": "{{baseURL}}/api/auth/login",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "4. Missing Content-Type Header",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Header Validation Test",
									"pm.test(\"Missing Content-Type handled correctly\", function () {",
									"    // Should return 422 or handle gracefully",
									"    pm.expect(pm.response.code).to.be.oneOf([400, 422]);",
									"});",
									"",
									"pm.test(\"Response time check\", function () {",
									"    const maxTime = pm.collectionVariables.get(\"maxExecutionTime\");",
									"    pm.expect(pm.response.responseTime).to.be.below(parseInt(maxTime, 10));",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\"username\": \"test\", \"password\": \"test\"}"
						},
						"url": {
							"raw": "{{baseURL}}/api/auth/login",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "5. Invalid Token Format - Security Test",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Security Test: Invalid JWT token",
									"pm.test(\"Status code is 401 Unauthorized\", function () {",
									"    pm.response.to.have.status(401);",
									"});",
									"",
									"pm.test(\"Invalid token rejected\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('detail');",
									"});",
									"",
									"pm.test(\"Response time check\", function () {",
									"    const maxTime = pm.collectionVariables.get(\"maxExecutionTime\");",
									"    pm.expect(pm.response.responseTime).to.be.below(parseInt(maxTime, 10));",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer invalid.token.here"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/profile/me",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"profile",
								"me"
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					"// Postman test to check the response time",
					"pm.test(`Global: Response time is less than 300 ms`, function () {",
					"    // pm.response.responseTime is a built-in variable that holds the total time taken for the request/response cycle in milliseconds.",
					"    pm.expect(pm.response.responseTime).to.be.below(300);",
					"});"
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseURL",
			"value": "http://localhost:8000",
			"description": {
				"content": "Base URL for the API",
				"type": "text/plain"
			}
		},
		{
			"key": "maxExecutionTime",
			"value": "500",
			"description": {
				"content": "Maximum allowed execution time in milliseconds",
				"type": "text/plain"
			}
		},
		{
			"key": "authToken",
			"value": "",
			"description": {
				"content": "JWT authentication token (set automatically after login)",
				"type": "text/plain"
			}
		},
		{
			"key": "userId",
			"value": "",
			"description": {
				"content": "Current user ID (set automatically after login)",
				"type": "text/plain"
			}
		},
		{
			"key": "productId",
			"value": "1",
			"description": {
				"content": "Test product ID for various operations",
				"type": "text/plain"
			}
		},
		{
			"key": "conversationId",
			"value": "",
			"description": {
				"content": "Test conversation ID (set after creating conversation)",
				"type": "text/plain"
			}
		}
	]
}